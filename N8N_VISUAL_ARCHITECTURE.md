# ğŸ¨ PersonaFlow AI Workflows - Visual Architecture

## ğŸ“Š Architecture Diagrams

### 1. Demo Workflow (Enhanced AI Agent)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DEMO WORKFLOW                             â”‚
â”‚                  (Portfolio & Recruiters)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User    â”‚
â”‚ Message  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Webhook      â”‚  POST /demo-chat
â”‚  (Trigger)      â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Extract & Format Data   â”‚
â”‚  â€¢ Parse message         â”‚
â”‚  â€¢ Detect source (chat/therapy)
â”‚  â€¢ Build dynamic prompt  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     AI Agent Node        â”‚
â”‚  (LangChain Agent)       â”‚
â”‚  â€¢ Receives message      â”‚
â”‚  â€¢ Uses system prompt    â”‚
â”‚  â€¢ Orchestrates response â”‚
â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
   â”‚                   â”‚
   â”‚                   â”‚
   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Ollama     â”‚  â”‚ Window Buffer    â”‚
â”‚   Chat       â”‚  â”‚    Memory        â”‚
â”‚ samantha:    â”‚  â”‚ (10 messages)    â”‚
â”‚  mistral     â”‚  â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚Format Responseâ”‚
         â”‚ â€¢ Clean text  â”‚
         â”‚ â€¢ Add metadataâ”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   Respond to  â”‚
         â”‚    Webhook    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  User Gets    â”‚
         â”‚   Response    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â±ï¸  Response Time: ~2-3 seconds
ğŸ’°  Cost: $0/month
ğŸ”’  Privacy: 100% local
```

---

### 2. Personal Workflow (Advanced RAG)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     PERSONAL WORKFLOW                            â”‚
â”‚              (Daily Use with Full Context)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User    â”‚
â”‚ Message  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Webhook      â”‚  POST /personal-chat
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Extract Data    â”‚
â”‚  â€¢ Parse payload â”‚
â”‚  â€¢ Get userId    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                                         â”‚
     â–¼                                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Fetch Journal  â”‚                    â”‚ Fetch Habits   â”‚
â”‚   Entries      â”‚                    â”‚                â”‚
â”‚ (Supabase)     â”‚                    â”‚ (Supabase)     â”‚
â”‚ Last 5 entries â”‚                    â”‚ All active     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                                      â”‚
     â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
     â”‚              â”‚ Fetch Therapy  â”‚      â”‚
     â”‚              â”‚   Sessions     â”‚      â”‚
     â”‚              â”‚  (Supabase)    â”‚      â”‚
     â”‚              â”‚  Last 3        â”‚      â”‚
     â”‚              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
     â”‚                   â”‚                  â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Build Context-     â”‚
                â”‚  Aware Prompt      â”‚
                â”‚ â€¢ Aggregate data   â”‚
                â”‚ â€¢ Build system msg â”‚
                â”‚ â€¢ Format for LLM   â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚  Ollama Chat       â”‚
                â”‚    (llama2)        â”‚
                â”‚ â€¢ Generate responseâ”‚
                â”‚ â€¢ Use full context â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Format Response    â”‚
                â”‚ â€¢ Clean output     â”‚
                â”‚ â€¢ Add metadata     â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Save to Database   â”‚
                â”‚   (Supabase)       â”‚
                â”‚ â€¢ Store message    â”‚
                â”‚ â€¢ Update history   â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚  Respond to User   â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â±ï¸  Response Time: ~3-5 seconds
ğŸ’°  Cost: $0/month (Supabase free tier)
ğŸ”’  Privacy: Local AI + Your DB
ğŸ“Š  Context: Journal + Habits + Therapy
```

---

### 3. Advanced AI Workflow (RAG + LangGraph + Vector DB)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ADVANCED AI WORKFLOW                          â”‚
â”‚         (Portfolio Showcase - Latest Technologies)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User    â”‚
â”‚ Message  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Webhook        â”‚  POST /advanced-ai-chat
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Extract & Enrich Data    â”‚
â”‚ â€¢ Parse message          â”‚
â”‚ â€¢ Detect intent âš¡       â”‚
â”‚ â€¢ Classify query type    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                                          â”‚
     â–¼                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Fetch Journal  â”‚                    â”‚ Fetch Habits   â”‚
â”‚   Entries      â”‚                    â”‚                â”‚
â”‚ (Supabase)     â”‚                    â”‚ (Supabase)     â”‚
â”‚ Last 10        â”‚                    â”‚ All active     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                                      â”‚
     â–¼                                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚ Generate Query     â”‚                      â”‚
â”‚    Embedding       â”‚                      â”‚
â”‚ (Ollama nomic)     â”‚                      â”‚
â”‚ [0.23, -0.56, ...] â”‚                      â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
     â”‚                                       â”‚
     â–¼                                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  Vector Similarity â”‚                      â”‚
â”‚      Search ğŸ”     â”‚                      â”‚
â”‚ (pgvector)         â”‚                      â”‚
â”‚ Top 5 similar      â”‚                      â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
     â”‚                                       â”‚
     â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
     â”‚              â”‚ Fetch Therapy  â”‚       â”‚
     â”‚              â”‚   Sessions     â”‚       â”‚
     â”‚              â”‚  (Supabase)    â”‚       â”‚
     â”‚              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
     â”‚                   â”‚                   â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Aggregate RAG      â”‚
                â”‚    Context ğŸ“š      â”‚
                â”‚ â€¢ Recent journal   â”‚
                â”‚ â€¢ Similar entries  â”‚
                â”‚ â€¢ Habits           â”‚
                â”‚ â€¢ Therapy insights â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚       LangGraph Agent ğŸ¤–           â”‚
        â”‚  (Intelligent Decision Making)     â”‚
        â”‚                                    â”‚
        â”‚  Decides which tools to use based  â”‚
        â”‚  on intent and context             â”‚
        â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”˜
           â”‚                              â”‚
           â”‚                              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
    â”‚               â”‚              â”‚            â”‚
    â–¼               â–¼              â–¼            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ollama  â”‚  â”‚Conversa- â”‚  â”‚  Tool:   â”‚  â”‚  Tool:   â”‚
â”‚ LLaMA   â”‚  â”‚  tion    â”‚  â”‚ Journal  â”‚  â”‚  Habit   â”‚
â”‚  3.1    â”‚  â”‚ Summary  â”‚  â”‚ Analyzer â”‚  â”‚ Tracker  â”‚
â”‚         â”‚  â”‚ Memory   â”‚  â”‚          â”‚  â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚  Tool:   â”‚
                         â”‚ Therapy  â”‚
                         â”‚ Insights â”‚
                         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Agent generates  â”‚
                    â”‚ response using   â”‚
                    â”‚ tool outputs     â”‚
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Format AI Response â”‚
                â”‚ â€¢ Clean text       â”‚
                â”‚ â€¢ Add metadata     â”‚
                â”‚ â€¢ Include context  â”‚
                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚                  â”‚
                     â–¼                  â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Save to DB     â”‚  â”‚ Prepare for  â”‚
            â”‚ (Supabase)     â”‚  â”‚ Embedding    â”‚
            â”‚ â€¢ Store msg    â”‚  â”‚ (Future use) â”‚
            â”‚ â€¢ Add metadata â”‚  â”‚              â”‚
            â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Respond to   â”‚
         â”‚     User      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â±ï¸  Response Time: ~4-5 seconds
ğŸ’°  Cost: $0/month
ğŸ”’  Privacy: 100% local AI
ğŸ¯  Features: RAG + LangGraph + Vector DB + 3 Tools
ğŸ“Š  Context: 4 sources + semantic search
```

---

## ğŸ”„ Data Flow Comparison

### Demo Workflow

```
Message â†’ Extract â†’ AI Agent â†’ Response
         (2 seconds)
```

### Personal Workflow

```
Message â†’ Extract â†’ [3 DB Queries] â†’ Build Context â†’ LLM â†’ Save â†’ Response
         (3-5 seconds)
```

### Advanced AI Workflow

```
Message â†’ Extract â†’ Intent â†’ [3 DB Queries + Vector Search] â†’
Aggregate â†’ LangGraph Agent â†’ [Tool Calls] â†’ LLM â†’ Save â†’ Response
         (4-5 seconds)
```

---

## ğŸ§© Component Breakdown

### AI Models Used

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           AI MODELS STACK               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  Chat Models:                           â”‚
â”‚  â”œâ”€ samantha:mistral (Demo)            â”‚
â”‚  â”œâ”€ llama2 (Personal)                  â”‚
â”‚  â””â”€ llama3.1 (Advanced) â­             â”‚
â”‚                                         â”‚
â”‚  Embedding Models:                      â”‚
â”‚  â””â”€ nomic-embed-text (384 dim)         â”‚
â”‚                                         â”‚
â”‚  Framework:                             â”‚
â”‚  â”œâ”€ LangChain (LLM framework)          â”‚
â”‚  â”œâ”€ LangGraph (Agent orchestration)    â”‚
â”‚  â””â”€ n8n (Workflow automation)          â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Database Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        SUPABASE DATABASE                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  Tables:                                â”‚
â”‚  â”œâ”€ journal_entries                     â”‚
â”‚  â”‚  â”œâ”€ id, content, mood, tags         â”‚
â”‚  â”‚  â””â”€ embedding (vector 384) ğŸ”       â”‚
â”‚  â”‚                                      â”‚
â”‚  â”œâ”€ habits                              â”‚
â”‚  â”‚  â””â”€ name, category, streak          â”‚
â”‚  â”‚                                      â”‚
â”‚  â”œâ”€ therapy_sessions                    â”‚
â”‚  â”‚  â””â”€ mood, summary, insights         â”‚
â”‚  â”‚                                      â”‚
â”‚  â””â”€ chat_messages                       â”‚
â”‚     â””â”€ session_id, role, content       â”‚
â”‚                                         â”‚
â”‚  Extensions:                            â”‚
â”‚  â””â”€ pgvector (vector similarity)       â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Intent Detection Flow

```
User Message
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Intent Classifier      â”‚
â”‚                         â”‚
â”‚  Patterns:              â”‚
â”‚  â€¢ journal|wrote        â”‚
â”‚  â€¢ habit|streak         â”‚
â”‚  â€¢ therapy|anxious      â”‚
â”‚  â€¢ insight|pattern      â”‚
â”‚  â€¢ (default: chat)      â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”œâ”€â†’ journal_query  â†’ Use Journal Analyzer Tool
     â”œâ”€â†’ habit_query    â†’ Use Habit Tracker Tool
     â”œâ”€â†’ therapy_query  â†’ Use Therapy Insights Tool
     â”œâ”€â†’ analytics_queryâ†’ Use All Tools
     â””â”€â†’ general_chat   â†’ Direct LLM response
```

---

## ğŸ” Vector Search Process

```
Step 1: User Query
"I feel anxious about work"
     â”‚
     â–¼
Step 2: Generate Embedding
[0.234, -0.567, 0.891, ..., 0.123]
     â”‚
     â–¼
Step 3: Similarity Search (Cosine)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Database: journal_entries       â”‚
â”‚                                 â”‚
â”‚ Entry 1: "Stressed about work" â”‚
â”‚ Similarity: 0.92 âœ“              â”‚
â”‚                                 â”‚
â”‚ Entry 2: "Anxious presentation" â”‚
â”‚ Similarity: 0.87 âœ“              â”‚
â”‚                                 â”‚
â”‚ Entry 3: "Worried deadlines"    â”‚
â”‚ Similarity: 0.81 âœ“              â”‚
â”‚                                 â”‚
â”‚ Entry 4: "Happy weekend"        â”‚
â”‚ Similarity: 0.23 âœ—              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
Step 4: Return Top 5
Provide to LLM as context
```

---

## ğŸ› ï¸ LangGraph Tool Execution

```
User: "How am I doing with my meditation habit?"
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   LangGraph Agent       â”‚
â”‚   Analyzes query        â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
Agent Thinks:
"User asked about a specific habit.
 I should use the habit_tracker tool."
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Call: habit_tracker()  â”‚
â”‚                         â”‚
â”‚  Returns:               â”‚
â”‚  {                      â”‚
â”‚    totalHabits: 8,      â”‚
â”‚    activeHabits: 6,     â”‚
â”‚    meditation: {        â”‚
â”‚      streak: 15,        â”‚
â”‚      lastCompleted: ... â”‚
â”‚    }                    â”‚
â”‚  }                      â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agent generates        â”‚
â”‚  response using data:   â”‚
â”‚                         â”‚
â”‚  "Great job! You've     â”‚
â”‚   maintained your       â”‚
â”‚   meditation habit for  â”‚
â”‚   15 consecutive days!" â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Performance Comparison

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              RESPONSE TIME BREAKDOWN               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  Demo Workflow:                                    â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 2s                          â”‚
â”‚                                                    â”‚
â”‚  Personal Workflow:                                â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 3.5s              â”‚
â”‚                                                    â”‚
â”‚  Advanced AI Workflow:                             â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 4.5s        â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Component Breakdown (Advanced):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Component            â”‚ Time    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Webhook Processing   â”‚ 100ms   â”‚
â”‚ Data Fetching (3)    â”‚ 600ms   â”‚
â”‚ Embedding Generation â”‚ 300ms   â”‚
â”‚ Vector Search        â”‚ 200ms   â”‚
â”‚ Context Aggregation  â”‚ 150ms   â”‚
â”‚ LangGraph + Tools    â”‚ 3000ms  â”‚
â”‚ Database Save        â”‚ 200ms   â”‚
â”‚ Response Formatting  â”‚ 50ms    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TOTAL                â”‚ 4600ms  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ System Prompt Evolution

### Demo (Basic)

```
"You are a compassionate AI companion..."
```

### Personal (Context-Aware)

```
"You are a compassionate AI companion with access to:
- Recent journal entries
- Active habits
- Therapy sessions

Recent Journal:
- 12/8: Happy - 'Great day at work...'
- 12/7: Anxious - 'Feeling stressed...'"
```

### Advanced (Full RAG + Tools)

```
"You are an advanced AI companion with:
- Full journal history + semantic search
- Real-time habit tracking
- Therapy session insights
- Custom analysis tools

You can:
- Analyze mood patterns
- Track habit progress
- Provide therapeutic insights
- Identify trends and patterns

Use tools when appropriate for accurate data."
```

---

## âœ… Feature Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              FEATURE COMPARISON                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Feature          â”‚ Demo â”‚ Personal â”‚ Advanced      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ AI Agent         â”‚  âœ“   â”‚    âœ—     â”‚      âœ“        â”‚
â”‚ RAG              â”‚  âœ—   â”‚    âœ“     â”‚      âœ“âœ“       â”‚
â”‚ Vector Search    â”‚  âœ—   â”‚    âœ—     â”‚      âœ“        â”‚
â”‚ LangGraph        â”‚  âœ—   â”‚    âœ—     â”‚      âœ“        â”‚
â”‚ Custom Tools     â”‚  âœ—   â”‚    âœ—     â”‚      âœ“ (3)    â”‚
â”‚ Intent Detection â”‚  âœ—   â”‚    âœ—     â”‚      âœ“        â”‚
â”‚ Memory           â”‚  âœ“   â”‚    âœ“     â”‚      âœ“âœ“       â”‚
â”‚ Database         â”‚  âœ—   â”‚    âœ“     â”‚      âœ“        â”‚
â”‚ Embeddings       â”‚  âœ—   â”‚    âœ—     â”‚      âœ“        â”‚
â”‚ Context Sources  â”‚  0   â”‚    3     â”‚      4        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Use these diagrams to understand the architecture and explain it to others!** ğŸ¨
